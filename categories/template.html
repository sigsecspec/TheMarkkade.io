<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Category - The Markkade.io</title>
<link rel="icon" href="../logo.png" />
<style>
  :root { --bg:#ffffff; --fg:#1d1d1f; --muted:#666; --card:#fafafa; --accent:#4CAF50; }
  *{ box-sizing:border-box; }
  body{ margin:0; font-family:system-ui, Arial; color:var(--fg); background:var(--bg); }
  header{ position:sticky; top:0; background:#fff; border-bottom:1px solid #eee; padding:12px 16px; display:flex; gap:12px; align-items:center; z-index:10; }
  header a.back{ text-decoration:none; color:var(--fg); font-weight:700; padding:8px 12px; border-radius:10px; border:1px solid #eee; }
  header h1{ font-size:18px; margin:0; flex:1; text-align:center; }
  main{ padding:16px; }
  .desc{ color:var(--muted); font-size:13px; margin:8px 0 16px; text-align:center; }
  .grid{ display:grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap:14px; }
  .card{ background:linear-gradient(135deg, #fafafa, #f2f2f2); border:1px solid rgba(0,0,0,0.06); border-radius:16px; padding:12px; box-shadow:0 4px 12px rgba(0,0,0,0.06); display:flex; flex-direction:column; gap:10px; }
  .card img{ width:100%; height:120px; object-fit:contain; }
  .title{ font-weight:700; font-size:16px; }
  .btn{ align-self:flex-end; appearance:none; border:none; color:#fff; background:linear-gradient(135deg, var(--accent), #66BB6A); padding:8px 12px; border-radius:12px; font-weight:700; cursor:pointer; box-shadow:0 4px 12px rgba(76,175,80,0.3); }
</style>
</head>
<body>
  <header>
    <a class="back" href="../index.html">‚Üê Home</a>
    <h1 id="title">Category</h1>
  </header>
  <main>
    <div class="desc" id="desc"></div>
    <div class="grid" id="grid"></div>
  </main>
  <script src="../games-data.js"></script>
  <script>
    const params = new URLSearchParams(location.search);
    const slug = params.get('slug');
    const cat = (window.MARKKADE?.CATEGORIES || []).find(c => c.slug === slug);
    const list = (window.MARKKADE?.GAMES || []).filter(g => g.category === slug);

    const title = document.getElementById('title');
    const desc = document.getElementById('desc');
    const grid = document.getElementById('grid');

    if(!cat){
      title.textContent = 'Category Not Found';
      desc.textContent = 'The requested category does not exist.';
    } else {
      title.textContent = cat.name;
      desc.textContent = cat.description || '';
    }

    list.forEach(game => {
      const el = document.createElement('div');
      el.className = 'card';
      el.innerHTML = `
        <img src="../${game.cover}" alt="${game.title}">
        <div class="title">${game.title}</div>
        <button class="btn" data-href="${game.href}">Play</button>
      `;
      el.querySelector('.btn').addEventListener('click', () => {
        window.location.href = "../" + game.href;
      });
      grid.appendChild(el);
    });
  </script>
</body>
</html>
