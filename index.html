<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no,viewport-fit=cover">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="theme-color" content="#E91E63">
<title>MOTORAZR2024 - Game Arcade</title>
<link rel="icon" href="logo.png">
<style>
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent;}

:root{
    --razr-pink:#E91E63;
    --razr-purple:#9C27B0;
    --razr-blue:#2196F3;
    --razr-cyan:#00BCD4;
    --razr-gold:#FFD700;
    --razr-orange:#FF6B35;
    --bg-dark:#0a0a0f;
    --bg-card:#151520;
    --text:#ffffff;
    --text-dim:#b0b0c0;
    --glow-pink:0 0 30px rgba(233,30,99,0.6);
    --glow-purple:0 0 30px rgba(156,39,176,0.6);
    --glow-blue:0 0 30px rgba(33,150,243,0.6);
}

@keyframes neonPulse{
    0%,100%{filter:brightness(1) drop-shadow(var(--glow-pink));}
    50%{filter:brightness(1.3) drop-shadow(var(--glow-purple));}
}

@keyframes gradientFlow{
    0%{background-position:0% 50%;}
    50%{background-position:100% 50%;}
    100%{background-position:0% 50%;}
}

@keyframes floatAnimation{
    0%,100%{transform:translateY(0px) rotate(0deg);}
    50%{transform:translateY(-20px) rotate(5deg);}
}

@keyframes slideInUp{
    from{transform:translateY(50px);opacity:0;}
    to{transform:translateY(0);opacity:1;}
}

@keyframes bounceIn{
    0%{transform:scale(0);opacity:0;}
    50%{transform:scale(1.1);}
    100%{transform:scale(1);opacity:1;}
}

@keyframes shimmer{
    0%{background-position:-200% center;}
    100%{background-position:200% center;}
}

body{
    font-family:'Segoe UI',system-ui,-apple-system,sans-serif;
    background:var(--bg-dark);
    color:var(--text);
    overflow-x:hidden;
    min-height:100vh;
    position:relative;
}

/* Animated Gradient Background */
.bg-gradient{
    position:fixed;
    top:0;left:0;
    width:100%;height:100%;
    background:linear-gradient(45deg,
        #E91E63 0%,
        #9C27B0 25%,
        #2196F3 50%,
        #00BCD4 75%,
        #E91E63 100%);
    background-size:400% 400%;
    animation:gradientFlow 15s ease infinite;
    opacity:0.15;
    pointer-events:none;
    z-index:0;
}

/* Floating Particles */
.particles{
    position:fixed;
    top:0;left:0;
    width:100%;height:100%;
    pointer-events:none;
    z-index:0;
    overflow:hidden;
}

.particle{
    position:absolute;
    width:4px;
    height:4px;
    background:var(--razr-pink);
    border-radius:50%;
    animation:floatAnimation 6s ease-in-out infinite;
    box-shadow:var(--glow-pink);
}

.particle:nth-child(2){animation-delay:1s;background:var(--razr-purple);box-shadow:var(--glow-purple);}
.particle:nth-child(3){animation-delay:2s;background:var(--razr-blue);box-shadow:var(--glow-blue);}
.particle:nth-child(4){animation-delay:3s;background:var(--razr-cyan);}
.particle:nth-child(5){animation-delay:4s;background:var(--razr-gold);}

/* Header */
header{
    position:sticky;
    top:0;
    z-index:100;
    background:rgba(21,21,32,0.95);
    backdrop-filter:blur(20px) saturate(180%);
    border-bottom:2px solid transparent;
    border-image:linear-gradient(90deg,var(--razr-pink),var(--razr-purple),var(--razr-blue)) 1;
    padding:14px 18px;
    box-shadow:0 4px 20px rgba(0,0,0,0.3);
}

.header-content{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px;
}

.logo-title{
    display:flex;
    align-items:center;
    gap:12px;
}

.logo-title img{
    width:36px;
    height:36px;
    border-radius:10px;
    animation:neonPulse 3s ease-in-out infinite;
}

.logo-title h1{
    font-size:20px;
    font-weight:800;
    background:linear-gradient(135deg,var(--razr-pink),var(--razr-purple),var(--razr-blue));
    background-size:200% 200%;
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
    background-clip:text;
    animation:gradientFlow 8s ease infinite;
    text-shadow:var(--glow-pink);
}

.header-actions{
    display:flex;
    gap:10px;
}

.icon-btn{
    width:44px;
    height:44px;
    border-radius:12px;
    background:linear-gradient(135deg,rgba(233,30,99,0.2),rgba(156,39,176,0.2));
    border:2px solid rgba(233,30,99,0.5);
    color:var(--razr-pink);
    font-size:22px;
    display:flex;
    align-items:center;
    justify-content:center;
    cursor:pointer;
    transition:all 0.3s cubic-bezier(0.4,0,0.2,1);
    position:relative;
    box-shadow:var(--glow-pink);
}

.icon-btn:active{
    transform:scale(0.85);
    box-shadow:0 0 40px rgba(233,30,99,0.8);
}

.badge{
    position:absolute;
    top:-6px;
    right:-6px;
    background:linear-gradient(135deg,var(--razr-orange),var(--razr-gold));
    color:#fff;
    font-size:11px;
    font-weight:800;
    padding:3px 7px;
    border-radius:12px;
    animation:bounceIn 0.5s ease,neonPulse 2s ease-in-out infinite 0.5s;
    box-shadow:0 2px 10px rgba(255,107,53,0.6);
}

/* Currency Bar */
.currency-bar{
    background:rgba(21,21,32,0.9);
    backdrop-filter:blur(15px) saturate(180%);
    border-bottom:1px solid rgba(233,30,99,0.2);
    padding:12px 18px;
    display:flex;
    justify-content:space-around;
    gap:14px;
    position:sticky;
    top:70px;
    z-index:99;
}

.currency-item{
    flex:1;
    display:flex;
    align-items:center;
    justify-content:center;
    gap:10px;
    padding:10px 14px;
    background:linear-gradient(135deg,rgba(233,30,99,0.15),rgba(156,39,176,0.15));
    border-radius:14px;
    border:2px solid rgba(233,30,99,0.3);
    transition:all 0.3s cubic-bezier(0.4,0,0.2,1);
    box-shadow:inset 0 1px 3px rgba(0,0,0,0.3);
}

.currency-item:active{
    transform:scale(0.95);
    box-shadow:var(--glow-pink),inset 0 1px 3px rgba(0,0,0,0.3);
}

.currency-icon{
    font-size:24px;
    animation:floatAnimation 4s ease-in-out infinite;
    filter:drop-shadow(0 2px 8px rgba(233,30,99,0.5));
}

.currency-item:nth-child(2) .currency-icon{animation-delay:2s;}

.currency-value{
    font-weight:800;
    font-size:18px;
    background:linear-gradient(135deg,var(--razr-pink),var(--razr-purple));
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
    background-clip:text;
}

/* Main Content */
main{
    position:relative;
    z-index:1;
    padding:18px;
    padding-bottom:100px;
}

/* Featured Game Carousel */
.featured-carousel{
    background:linear-gradient(135deg,rgba(233,30,99,0.2),rgba(156,39,176,0.2));
    border:2px solid rgba(233,30,99,0.4);
    border-radius:24px;
    padding:24px;
    margin-bottom:28px;
    position:relative;
    overflow:hidden;
    box-shadow:var(--glow-pink),0 8px 32px rgba(0,0,0,0.3);
    animation:slideInUp 0.6s ease;
}

.featured-carousel::before{
    content:'';
    position:absolute;
    top:-50%;
    right:-50%;
    width:200%;
    height:200%;
    background:linear-gradient(45deg,transparent,rgba(255,255,255,0.1),transparent);
    animation:shimmer 3s linear infinite;
}

.featured-label{
    display:inline-flex;
    align-items:center;
    gap:6px;
    background:linear-gradient(135deg,var(--razr-pink),var(--razr-purple));
    color:#fff;
    font-size:13px;
    font-weight:800;
    padding:6px 14px;
    border-radius:20px;
    margin-bottom:14px;
    box-shadow:0 4px 15px rgba(233,30,99,0.5);
    animation:neonPulse 3s ease-in-out infinite;
}

.featured-carousel h2{
    font-size:26px;
    font-weight:800;
    margin-bottom:10px;
    background:linear-gradient(135deg,#fff,var(--razr-pink));
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
    background-clip:text;
}

.featured-carousel p{
    color:var(--text-dim);
    margin-bottom:18px;
    line-height:1.6;
    font-size:15px;
}

.featured-btn{
    background:linear-gradient(135deg,var(--razr-pink),var(--razr-purple));
    color:#fff;
    border:none;
    padding:14px 28px;
    border-radius:14px;
    font-size:17px;
    font-weight:800;
    cursor:pointer;
    box-shadow:0 6px 24px rgba(233,30,99,0.5);
    transition:all 0.3s cubic-bezier(0.4,0,0.2,1);
    text-transform:uppercase;
    letter-spacing:1px;
}

.featured-btn:active{
    transform:scale(0.92);
    box-shadow:0 4px 16px rgba(233,30,99,0.7);
}

/* Section Title */
.section-title{
    font-size:22px;
    font-weight:800;
    margin:28px 0 18px;
    display:flex;
    align-items:center;
    gap:10px;
    animation:slideInUp 0.6s ease;
}

.section-title span{
    background:linear-gradient(135deg,var(--razr-pink),var(--razr-purple),var(--razr-blue));
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
    background-clip:text;
    font-size:26px;
}

/* Games Grid */
.games-grid{
    display:grid;
    grid-template-columns:repeat(2,1fr);
    gap:14px;
    margin-bottom:28px;
}

.game-card{
    background:var(--bg-card);
    border:2px solid rgba(233,30,99,0.3);
    border-radius:18px;
    overflow:hidden;
    transition:all 0.3s cubic-bezier(0.4,0,0.2,1);
    cursor:pointer;
    position:relative;
    animation:slideInUp 0.6s ease;
    animation-fill-mode:both;
}

.game-card:nth-child(1){animation-delay:0.1s;}
.game-card:nth-child(2){animation-delay:0.2s;}
.game-card:nth-child(3){animation-delay:0.3s;}
.game-card:nth-child(4){animation-delay:0.4s;}
.game-card:nth-child(5){animation-delay:0.5s;}
.game-card:nth-child(6){animation-delay:0.6s;}

.game-card::before{
    content:'';
    position:absolute;
    inset:0;
    background:linear-gradient(135deg,rgba(233,30,99,0.1),rgba(156,39,176,0.1));
    opacity:0;
    transition:opacity 0.3s ease;
}

.game-card:active{
    transform:scale(0.92);
    border-color:var(--razr-pink);
    box-shadow:var(--glow-pink);
}

.game-card:active::before{
    opacity:1;
}

.game-card-img{
    width:100%;
    height:110px;
    background:linear-gradient(135deg,rgba(233,30,99,0.15),rgba(156,39,176,0.15));
    display:flex;
    align-items:center;
    justify-content:center;
    position:relative;
    overflow:hidden;
    font-size:54px;
    filter:drop-shadow(0 4px 12px rgba(233,30,99,0.4));
}

.game-card-info{
    padding:14px;
    background:rgba(0,0,0,0.3);
}

.game-title{
    font-size:15px;
    font-weight:700;
    margin-bottom:5px;
    white-space:nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
}

.game-category{
    font-size:12px;
    color:var(--text-dim);
    font-weight:500;
}

/* Quick Actions */
.quick-actions{
    display:grid;
    grid-template-columns:repeat(2,1fr);
    gap:14px;
    margin-bottom:28px;
}

.action-card{
    background:linear-gradient(135deg,var(--bg-card),rgba(233,30,99,0.1));
    border:2px solid rgba(233,30,99,0.4);
    border-radius:18px;
    padding:22px;
    text-align:center;
    cursor:pointer;
    transition:all 0.3s cubic-bezier(0.4,0,0.2,1);
    animation:slideInUp 0.6s ease;
    box-shadow:0 4px 16px rgba(0,0,0,0.2);
}

.action-card:nth-child(1){animation-delay:0.7s;}
.action-card:nth-child(2){animation-delay:0.8s;}

.action-card:active{
    transform:scale(0.92);
    box-shadow:var(--glow-pink);
}

.action-icon{
    font-size:36px;
    margin-bottom:10px;
    filter:drop-shadow(0 4px 12px rgba(233,30,99,0.4));
}

.action-title{
    font-size:16px;
    font-weight:700;
    margin-bottom:5px;
}

.action-desc{
    font-size:12px;
    color:var(--text-dim);
}

/* Modal */
.modal{
    position:fixed;
    top:0;left:0;
    width:100%;
    height:100%;
    background:rgba(0,0,0,0.85);
    backdrop-filter:blur(15px);
    z-index:1000;
    display:none;
    align-items:center;
    justify-content:center;
    padding:20px;
    animation:fadeIn 0.3s ease;
}

.modal.active{
    display:flex;
}

@keyframes fadeIn{
    from{opacity:0;}
    to{opacity:1;}
}

.modal-content{
    background:var(--bg-card);
    border:2px solid rgba(233,30,99,0.5);
    border-radius:24px;
    padding:26px;
    max-width:420px;
    width:100%;
    max-height:85vh;
    overflow-y:auto;
    animation:bounceIn 0.4s cubic-bezier(0.4,0,0.2,1);
    box-shadow:var(--glow-pink),0 8px 32px rgba(0,0,0,0.5);
}

.modal-header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-bottom:22px;
}

.modal-title{
    font-size:22px;
    font-weight:800;
    background:linear-gradient(135deg,var(--razr-pink),var(--razr-purple));
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
    background-clip:text;
}

.close-btn{
    font-size:28px;
    cursor:pointer;
    color:var(--text-dim);
    transition:all 0.3s ease;
    width:36px;
    height:36px;
    display:flex;
    align-items:center;
    justify-content:center;
    border-radius:10px;
}

.close-btn:active{
    color:var(--razr-pink);
    background:rgba(233,30,99,0.2);
}

/* Shop Items */
.shop-item{
    background:rgba(233,30,99,0.1);
    border:2px solid rgba(233,30,99,0.3);
    border-radius:14px;
    padding:18px;
    margin-bottom:14px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    transition:all 0.3s ease;
}

.shop-item:active{
    border-color:var(--razr-pink);
    box-shadow:var(--glow-pink);
}

.shop-item-info{
    flex:1;
}

.shop-item-title{
    font-weight:700;
    margin-bottom:5px;
    font-size:15px;
}

.shop-item-price{
    font-size:15px;
    color:var(--razr-pink);
    font-weight:600;
}

.shop-btn{
    background:linear-gradient(135deg,var(--razr-pink),var(--razr-purple));
    color:#fff;
    border:none;
    padding:10px 18px;
    border-radius:10px;
    font-weight:700;
    cursor:pointer;
    transition:all 0.3s ease;
    font-size:14px;
    box-shadow:0 4px 12px rgba(233,30,99,0.4);
}

.shop-btn:active{
    transform:scale(0.9);
}

/* Reward Card */
.reward-card{
    background:linear-gradient(135deg,rgba(255,215,0,0.2),rgba(233,30,99,0.15));
    border:2px solid rgba(255,215,0,0.4);
    border-radius:18px;
    padding:24px;
    margin-bottom:14px;
    text-align:center;
    box-shadow:0 0 30px rgba(255,215,0,0.3);
}

.reward-icon{
    font-size:54px;
    margin-bottom:14px;
    filter:drop-shadow(0 4px 16px rgba(255,215,0,0.5));
    animation:floatAnimation 3s ease-in-out infinite;
}

.reward-amount{
    font-size:28px;
    font-weight:800;
    color:var(--razr-gold);
    margin-bottom:10px;
    text-shadow:0 2px 12px rgba(255,215,0,0.5);
}

.reward-text{
    color:var(--text-dim);
    margin-bottom:18px;
    font-size:15px;
}

.claim-btn{
    background:linear-gradient(135deg,var(--razr-gold),var(--razr-orange));
    color:#000;
    border:none;
    padding:14px 36px;
    border-radius:14px;
    font-size:17px;
    font-weight:800;
    cursor:pointer;
    box-shadow:0 6px 24px rgba(255,215,0,0.5);
    transition:all 0.3s cubic-bezier(0.4,0,0.2,1);
    text-transform:uppercase;
}

.claim-btn:active{
    transform:scale(0.92);
}

.claim-btn:disabled{
    opacity:0.4;
    cursor:not-allowed;
}

/* Explosion Particles */
.explosion-particle{
    position:fixed;
    pointer-events:none;
    z-index:9999;
    font-size:28px;
    animation:explodeParticle 1.5s ease-out forwards;
}

@keyframes explodeParticle{
    0%{transform:translate(0,0) scale(1) rotate(0deg);opacity:1;}
    100%{transform:translate(var(--tx),var(--ty)) scale(0) rotate(360deg);opacity:0;}
}

/* Toast Notification */
.toast{
    position:fixed;
    bottom:110px;
    left:50%;
    transform:translateX(-50%) translateY(200px);
    background:linear-gradient(135deg,rgba(233,30,99,0.95),rgba(156,39,176,0.95));
    color:#fff;
    padding:14px 28px;
    border-radius:14px;
    font-weight:700;
    z-index:9999;
    transition:transform 0.4s cubic-bezier(0.4,0,0.2,1);
    box-shadow:0 6px 24px rgba(233,30,99,0.6);
    border:2px solid rgba(255,255,255,0.3);
    backdrop-filter:blur(10px);
}

.toast.show{
    transform:translateX(-50%) translateY(0);
}

/* Scrollbar */
::-webkit-scrollbar{
    width:8px;
}

::-webkit-scrollbar-track{
    background:var(--bg-dark);
}

::-webkit-scrollbar-thumb{
    background:linear-gradient(135deg,var(--razr-pink),var(--razr-purple));
    border-radius:4px;
}

::-webkit-scrollbar-thumb:hover{
    background:linear-gradient(135deg,var(--razr-purple),var(--razr-pink));
}
</style>
</head>
<body>
<!-- Animated Background -->
<div class="bg-gradient"></div>
<div class="particles">
    <div class="particle" style="left:10%;top:20%;"></div>
    <div class="particle" style="left:80%;top:30%;"></div>
    <div class="particle" style="left:30%;top:60%;"></div>
    <div class="particle" style="left:70%;top:80%;"></div>
    <div class="particle" style="left:50%;top:40%;"></div>
</div>

<header>
    <div class="header-content">
        <div class="logo-title">
            <img src="logo.png" alt="Logo">
            <h1>MOTORAZR2024</h1>
        </div>
        <div class="header-actions">
            <div class="icon-btn" id="rewardsBtn">
                🎁
                <span class="badge" id="rewardBadge" style="display:none;">!</span>
            </div>
            <div class="icon-btn" id="shopBtn">
                🛒
            </div>
        </div>
    </div>
</header>

<div class="currency-bar">
    <div class="currency-item" id="cashDisplay">
        <span class="currency-icon">💰</span>
        <span class="currency-value" id="playerCash">0</span>
    </div>
    <div class="currency-item" id="coinsDisplay">
        <span class="currency-icon">🪙</span>
        <span class="currency-value" id="playerCoins">0</span>
    </div>
</div>

<main>
    <div class="featured-carousel">
        <span class="featured-label">⭐ FEATURED GAME</span>
        <h2 id="featuredTitle">Welcome to MOTORAZR2024!</h2>
        <p id="featuredDesc">Your ultimate mobile gaming experience. Play exclusive Razr-optimized games and win big!</p>
        <button class="featured-btn" id="featuredBtn">PLAY NOW</button>
    </div>

    <div class="section-title">
        <span>🎮</span> All Games
    </div>
    <div class="games-grid" id="gamesGrid"></div>

    <div class="section-title">
        <span>⚡</span> Quick Actions
    </div>
    <div class="quick-actions">
        <div class="action-card" id="viewAllBtn">
            <div class="action-icon">📚</div>
            <div class="action-title">All Games</div>
            <div class="action-desc">Browse complete library</div>
        </div>
        <div class="action-card" id="statsBtn">
            <div class="action-icon">📊</div>
            <div class="action-title">Statistics</div>
            <div class="action-desc">View your progress</div>
        </div>
    </div>
</main>

<!-- Shop Modal -->
<div class="modal" id="shopModal">
    <div class="modal-content">
        <div class="modal-header">
            <div class="modal-title">🛒 Shop</div>
            <div class="close-btn" id="closeShop">×</div>
        </div>
        <div id="shopItems"></div>
    </div>
</div>

<!-- Rewards Modal -->
<div class="modal" id="rewardsModal">
    <div class="modal-content">
        <div class="modal-header">
            <div class="modal-title">🎁 Rewards Center</div>
            <div class="close-btn" id="closeRewards">×</div>
        </div>
        <div id="rewardsContent"></div>
    </div>
</div>

<div class="toast" id="toast"></div>

<script src="games-data.js"></script>
<script>
// ========== AUDIO SYSTEM ==========
const AudioEngine = {
    context: null,
    sounds: {},
    
    init() {
        this.context = new (window.AudioContext || window.webkitAudioContext)();
    },
    
    playTone(freq, duration, type = 'sine') {
        if (!this.context) this.init();
        const osc = this.context.createOscillator();
        const gain = this.context.createGain();
        
        osc.connect(gain);
        gain.connect(this.context.destination);
        
        osc.frequency.value = freq;
        osc.type = type;
        
        gain.gain.setValueAtTime(0.2, this.context.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.01, this.context.currentTime + duration);
        
        osc.start(this.context.currentTime);
        osc.stop(this.context.currentTime + duration);
    },
    
    playClick() {
        this.playTone(400, 0.08, 'square');
    },
    
    playSuccess() {
        this.playTone(523.25, 0.1, 'sine');
        setTimeout(() => this.playTone(659.25, 0.15, 'sine'), 100);
    },
    
    playReward() {
        const notes = [523.25, 659.25, 783.99, 1046.50];
        notes.forEach((note, i) => {
            setTimeout(() => this.playTone(note, 0.2, 'sine'), i * 100);
        });
    },
    
    playBuy() {
        this.playTone(800, 0.1, 'triangle');
        setTimeout(() => this.playTone(1000, 0.15, 'triangle'), 80);
    },
    
    playError() {
        this.playTone(200, 0.3, 'sawtooth');
    }
};

// ========== VIBRATION SYSTEM ==========
const VibrationEngine = {
    patterns: {
        tap: [10],
        click: [20],
        success: [30, 20, 30],
        reward: [50, 30, 50, 30, 50],
        buy: [40, 20, 40],
        error: [200]
    },
    
    vibrate(pattern) {
        if ('vibrate' in navigator) {
            navigator.vibrate(typeof pattern === 'string' ? this.patterns[pattern] : pattern);
        }
    }
};

// ========== PARTICLE SYSTEM ==========
const ParticleEngine = {
    createExplosion(x, y, icon = '💰', count = 12) {
        for (let i = 0; i < count; i++) {
            const particle = document.createElement('div');
            particle.className = 'explosion-particle';
            particle.textContent = icon;
            
            const angle = (i / count) * Math.PI * 2;
            const distance = 100 + Math.random() * 50;
            const tx = Math.cos(angle) * distance;
            const ty = Math.sin(angle) * distance;
            
            particle.style.left = x + 'px';
            particle.style.top = y + 'px';
            particle.style.setProperty('--tx', tx + 'px');
            particle.style.setProperty('--ty', ty + 'px');
            
            document.body.appendChild(particle);
            setTimeout(() => particle.remove(), 1500);
        }
    },
    
    createFloating(x, y, icon = '✨', count = 5) {
        for (let i = 0; i < count; i++) {
            const particle = document.createElement('div');
            particle.className = 'explosion-particle';
            particle.textContent = icon;
            particle.style.left = (x + (Math.random() - 0.5) * 100) + 'px';
            particle.style.top = y + 'px';
            particle.style.setProperty('--tx', (Math.random() - 0.5) * 50 + 'px');
            particle.style.setProperty('--ty', '-150px');
            document.body.appendChild(particle);
            setTimeout(() => particle.remove(), 1500);
        }
    }
};

// ========== TOAST SYSTEM ==========
function showToast(message, duration = 3000) {
    const toast = document.getElementById('toast');
    toast.textContent = message;
    toast.classList.add('show');
    setTimeout(() => toast.classList.remove('show'), duration);
}

// ========== CURRENCY SYSTEM ==========
let playerCash = Number(localStorage.getItem('motorazr_cash')) || 0;
let playerCoins = Number(localStorage.getItem('motorazr_coins')) || 0;

function updateCurrency(animated = false) {
    const cashEl = document.getElementById('playerCash');
    const coinsEl = document.getElementById('playerCoins');
    
    cashEl.textContent = playerCash.toLocaleString();
    coinsEl.textContent = playerCoins.toLocaleString();
    
    localStorage.setItem('motorazr_cash', playerCash);
    localStorage.setItem('motorazr_coins', playerCoins);
    
    if (animated) {
        cashEl.parentElement.style.transform = 'scale(1.1)';
        coinsEl.parentElement.style.transform = 'scale(1.1)';
        setTimeout(() => {
            cashEl.parentElement.style.transform = '';
            coinsEl.parentElement.style.transform = '';
        }, 300);
    }
}

function addCurrency(cash = 0, coins = 0) {
    playerCash += cash;
    playerCoins += coins;
    updateCurrency(true);
    AudioEngine.playSuccess();
    VibrationEngine.vibrate('success');
}

// ========== FIRST TIME BONUS ==========
function checkFirstTimeBonus() {
    const hasBonus = localStorage.getItem('motorazr_first_bonus');
    if (!hasBonus) {
        setTimeout(() => {
            addCurrency(5000, 2500);
            showToast('🎉 WELCOME BONUS: 💰5000 + 🪙2500!', 5000);
            AudioEngine.playReward();
            VibrationEngine.vibrate('reward');
            ParticleEngine.createExplosion(window.innerWidth / 2, window.innerHeight / 2, '🎉', 20);
            localStorage.setItem('motorazr_first_bonus', 'true');
        }, 1000);
    }
}

// ========== DAILY REWARDS ==========
function checkDailyReward() {
    const lastClaim = localStorage.getItem('motorazr_daily_reward');
    const today = new Date().toDateString();
    
    if (lastClaim !== today) {
        document.getElementById('rewardBadge').style.display = 'block';
        return true;
    }
    return false;
}

function claimDailyReward() {
    const today = new Date().toDateString();
    localStorage.setItem('motorazr_daily_reward', today);
    
    const cash = Math.floor(Math.random() * 500) + 500;
    const coins = Math.floor(Math.random() * 300) + 300;
    
    addCurrency(cash, coins);
    showToast(`🎁 DAILY REWARD: 💰${cash} + 🪙${coins}!`, 4000);
    AudioEngine.playReward();
    VibrationEngine.vibrate('reward');
    ParticleEngine.createExplosion(window.innerWidth / 2, window.innerHeight / 2, '🎁', 15);
    
    document.getElementById('rewardBadge').style.display = 'none';
    loadRewards();
}

// ========== SHOP SYSTEM ==========
const shopItems = [
    { id: 1, title: '💎 Starter Coin Pack', coins: 1000, price: 200, currency: 'cash', icon: '🪙' },
    { id: 2, title: '💎 Medium Coin Pack', coins: 3000, price: 500, currency: 'cash', icon: '🪙' },
    { id: 3, title: '💎 Mega Coin Pack', coins: 8000, price: 1200, currency: 'cash', icon: '🪙' },
    { id: 4, title: '💎 Ultimate Coin Pack', coins: 20000, price: 2800, currency: 'cash', icon: '🪙' },
    { id: 5, title: '💵 Starter Cash Pack', cash: 1000, price: 1000, currency: 'coins', icon: '💰' },
    { id: 6, title: '💵 Medium Cash Pack', cash: 3000, price: 2500, currency: 'coins', icon: '💰' },
    { id: 7, title: '💵 Mega Cash Pack', cash: 8000, price: 6000, currency: 'coins', icon: '💰' },
    { id: 8, title: '💵 Ultimate Cash Pack', cash: 20000, price: 14000, currency: 'coins', icon: '💰' }
];

function loadShop() {
    const container = document.getElementById('shopItems');
    container.innerHTML = shopItems.map(item => `
        <div class="shop-item">
            <div class="shop-item-info">
                <div class="shop-item-title">${item.title}</div>
                <div class="shop-item-price">
                    ${item.currency === 'cash' ? '💰' : '🪙'} ${item.price.toLocaleString()}
                </div>
            </div>
            <button class="shop-btn" onclick="buyItem(${item.id})">
                ${item.icon} ${item.coins ? item.coins.toLocaleString() : item.cash.toLocaleString()}
            </button>
        </div>
    `).join('');
}

function buyItem(id) {
    const item = shopItems.find(i => i.id === id);
    
    if (item.currency === 'cash' && playerCash >= item.price) {
        playerCash -= item.price;
        if (item.coins) playerCoins += item.coins;
        if (item.cash) playerCash += item.cash;
        updateCurrency(true);
        showToast(`✅ PURCHASED: ${item.title}!`);
        AudioEngine.playBuy();
        VibrationEngine.vibrate('buy');
        ParticleEngine.createExplosion(window.innerWidth / 2, window.innerHeight / 2, item.icon, 12);
    } else if (item.currency === 'coins' && playerCoins >= item.price) {
        playerCoins -= item.price;
        if (item.coins) playerCoins += item.coins;
        if (item.cash) playerCash += item.cash;
        updateCurrency(true);
        showToast(`✅ PURCHASED: ${item.title}!`);
        AudioEngine.playBuy();
        VibrationEngine.vibrate('buy');
        ParticleEngine.createExplosion(window.innerWidth / 2, window.innerHeight / 2, item.icon, 12);
    } else {
        showToast('❌ INSUFFICIENT FUNDS!');
        AudioEngine.playError();
        VibrationEngine.vibrate('error');
    }
}

// ========== REWARDS DISPLAY ==========
function loadRewards() {
    const container = document.getElementById('rewardsContent');
    const canClaim = checkDailyReward();
    
    const streak = Number(localStorage.getItem('motorazr_streak')) || 0;
    
    container.innerHTML = `
        <div class="reward-card">
            <div class="reward-icon">🎁</div>
            <div class="reward-amount">DAILY REWARD</div>
            <div class="reward-text">
                ${canClaim ? 'Claim your daily bonus now!' : 'Come back tomorrow for more!'}
                <br><br>
                🔥 Current Streak: ${streak} days
            </div>
            <button class="claim-btn" ${!canClaim ? 'disabled' : ''} onclick="claimDailyReward()">
                ${canClaim ? 'CLAIM NOW' : 'CLAIMED TODAY'}
            </button>
        </div>
    `;
}

// ========== GAMES DISPLAY ==========
function loadGames() {
    const games = window.MARKKADE?.GAMES || [];
    const container = document.getElementById('gamesGrid');
    
    container.innerHTML = games.map(game => `
        <div class="game-card" onclick="playGame('${game.href}', '${game.title}')">
            <div class="game-card-img">${game.cover}</div>
            <div class="game-card-info">
                <div class="game-title">${game.title}</div>
                <div class="game-category">${getCategoryName(game.category)}</div>
            </div>
        </div>
    `).join('');
    
    // Set featured game
    const featured = games.find(g => g.featured) || games[0];
    if (featured) {
        document.getElementById('featuredTitle').textContent = featured.title;
        document.getElementById('featuredDesc').textContent = featured.desc;
        document.getElementById('featuredBtn').onclick = () => playGame(featured.href, featured.title);
    }
}

function getCategoryName(slug) {
    const categories = window.MARKKADE?.CATEGORIES || [];
    const cat = categories.find(c => c.slug === slug);
    return cat ? cat.name : '';
}

// ========== NAVIGATION ==========
function playGame(href, title) {
    AudioEngine.playClick();
    VibrationEngine.vibrate('click');
    showToast(`🎮 LOADING ${title.toUpperCase()}...`);
    ParticleEngine.createFloating(window.innerWidth / 2, window.innerHeight / 2, '🎮', 8);
    setTimeout(() => window.location.href = href, 400);
}

// ========== EVENT LISTENERS ==========
document.getElementById('shopBtn').addEventListener('click', () => {
    AudioEngine.playClick();
    VibrationEngine.vibrate('click');
    loadShop();
    document.getElementById('shopModal').classList.add('active');
});

document.getElementById('closeShop').addEventListener('click', () => {
    AudioEngine.playClick();
    VibrationEngine.vibrate('click');
    document.getElementById('shopModal').classList.remove('active');
});

document.getElementById('rewardsBtn').addEventListener('click', () => {
    AudioEngine.playClick();
    VibrationEngine.vibrate('click');
    loadRewards();
    document.getElementById('rewardsModal').classList.add('active');
});

document.getElementById('closeRewards').addEventListener('click', () => {
    AudioEngine.playClick();
    VibrationEngine.vibrate('click');
    document.getElementById('rewardsModal').classList.remove('active');
});

document.getElementById('viewAllBtn').addEventListener('click', () => {
    AudioEngine.playClick();
    VibrationEngine.vibrate('click');
    showToast('🎮 VIEWING ALL GAMES...');
    // Could expand to show all games or filter
});

document.getElementById('statsBtn').addEventListener('click', () => {
    AudioEngine.playClick();
    VibrationEngine.vibrate('click');
    showToast('📊 STATISTICS COMING SOON!');
});

// Close modals on background click
document.querySelectorAll('.modal').forEach(modal => {
    modal.addEventListener('click', (e) => {
        if (e.target === modal) {
            AudioEngine.playClick();
            VibrationEngine.vibrate('click');
            modal.classList.remove('active');
        }
    });
});

// Add vibrate on touch for all interactive elements
document.addEventListener('DOMContentLoaded', () => {
    const interactiveElements = [
        'button', '.game-card', '.action-card', '.currency-item', 
        '.icon-btn', '.shop-item', '.shop-btn', '.claim-btn'
    ];
    
    interactiveElements.forEach(selector => {
        document.querySelectorAll(selector).forEach(el => {
            el.addEventListener('touchstart', () => VibrationEngine.vibrate('tap'), { passive: true });
        });
    });
});

// Currency display tap effects
document.getElementById('cashDisplay').addEventListener('click', () => {
    AudioEngine.playClick();
    VibrationEngine.vibrate('tap');
    ParticleEngine.createFloating(window.innerWidth / 4, 100, '💰', 3);
});

document.getElementById('coinsDisplay').addEventListener('click', () => {
    AudioEngine.playClick();
    VibrationEngine.vibrate('tap');
    ParticleEngine.createFloating(window.innerWidth * 3 / 4, 100, '🪙', 3);
});

// ========== INITIALIZATION ==========
AudioEngine.init();
updateCurrency();
loadGames();
checkFirstTimeBonus();
checkDailyReward();

// Auto-save currency periodically
setInterval(() => {
    localStorage.setItem('motorazr_cash', playerCash);
    localStorage.setItem('motorazr_coins', playerCoins);
}, 5000);
</script>
</body>
</html>
