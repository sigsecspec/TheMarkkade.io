<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Fortune Reels - Professional Casino Slot Machine</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1a1a2e, #16213e, #0f3460);
            color: #fff;
            overflow: hidden;
            height: 100vh;
            position: relative;
        }

        /* Dual Screen Layout for Motorola Razr 2024 */
        .dual-screen-container {
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Top Screen - Display Area */
        .top-screen {
            height: 50vh;
            background: linear-gradient(135deg, #2c1810, #1a0e0a);
            border-bottom: 3px solid #ffd700;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        /* Game Title */
        .game-title {
            text-align: center;
            padding: 10px 0;
            background: linear-gradient(90deg, #ffd700, #ffed4e, #ffd700);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            animation: titleGlow 2s ease-in-out infinite alternate;
        }

        @keyframes titleGlow {
            from { filter: brightness(1); }
            to { filter: brightness(1.2); }
        }

        /* Slot Machine Frame */
        .slot-frame {
            background: linear-gradient(145deg, #8b4513, #a0522d);
            border: 4px solid #ffd700;
            border-radius: 15px;
            margin: 10px;
            padding: 15px;
            box-shadow: 
                inset 0 0 20px rgba(255, 215, 0, 0.3),
                0 8px 25px rgba(0, 0, 0, 0.6);
            position: relative;
        }

        /* Reels Container */
        .reels-container {
            display: flex;
            justify-content: center;
            gap: 8px;
            background: #000;
            border: 3px solid #333;
            border-radius: 10px;
            padding: 10px;
            box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.8);
        }

        .reel {
            width: 70px;
            height: 120px;
            background: linear-gradient(180deg, #1a1a1a, #000);
            border: 2px solid #444;
            border-radius: 8px;
            overflow: hidden;
            position: relative;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.7);
        }

        .reel-strip {
            position: absolute;
            width: 100%;
            transition: transform 0.1s ease-out;
        }

        .symbol {
            width: 100%;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
            border-bottom: 1px solid #333;
        }

        /* Paylines Display */
        .paylines {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
        }

        .payline {
            position: absolute;
            height: 3px;
            background: linear-gradient(90deg, transparent, #ffd700, transparent);
            opacity: 0;
            animation: paylineGlow 1s ease-in-out;
        }

        @keyframes paylineGlow {
            0%, 100% { opacity: 0; }
            50% { opacity: 1; }
        }

        /* Win Display */
        .win-display {
            text-align: center;
            margin: 10px 0;
            font-size: 18px;
            font-weight: bold;
            color: #ffd700;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
            min-height: 25px;
        }

        /* Credits and Bet Display */
        .game-info {
            display: flex;
            justify-content: space-between;
            padding: 5px 15px;
            background: rgba(0, 0, 0, 0.6);
            border-radius: 8px;
            margin: 5px 0;
        }

        .info-item {
            text-align: center;
            font-size: 14px;
        }

        .info-value {
            font-size: 18px;
            font-weight: bold;
            color: #ffd700;
        }

        /* Bottom Screen - Controls */
        .bottom-screen {
            height: 50vh;
            background: linear-gradient(135deg, #0f0f23, #1a1a2e);
            padding: 20px;
            display: flex;
            flex-direction: column;
            justify-content: space-around;
        }

        /* Control Buttons */
        .controls-row {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin: 10px 0;
        }

        .control-btn {
            background: linear-gradient(145deg, #4a4a4a, #2a2a2a);
            border: 3px solid #ffd700;
            border-radius: 15px;
            color: #fff;
            font-size: 16px;
            font-weight: bold;
            padding: 15px 20px;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 
                0 6px 12px rgba(0, 0, 0, 0.4),
                inset 0 1px 3px rgba(255, 255, 255, 0.1);
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
            min-width: 80px;
            text-align: center;
        }

        .control-btn:active {
            transform: translateY(2px);
            box-shadow: 
                0 3px 6px rgba(0, 0, 0, 0.4),
                inset 0 1px 3px rgba(255, 255, 255, 0.1);
        }

        .control-btn:hover {
            background: linear-gradient(145deg, #5a5a5a, #3a3a3a);
            border-color: #ffed4e;
        }

        .spin-btn {
            background: linear-gradient(145deg, #ff6b6b, #cc5555);
            border-color: #ffd700;
            font-size: 20px;
            padding: 20px 30px;
            border-radius: 20px;
            animation: spinBtnPulse 2s ease-in-out infinite;
        }

        @keyframes spinBtnPulse {
            0%, 100% { box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4), 0 0 0 0 rgba(255, 107, 107, 0.7); }
            50% { box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4), 0 0 0 10px rgba(255, 107, 107, 0); }
        }

        .spin-btn:active {
            background: linear-gradient(145deg, #cc5555, #aa4444);
        }

        /* AI Model Credit */
        .ai-credit {
            position: absolute;
            bottom: 5px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 10px;
            color: #888;
            text-align: center;
            background: rgba(0, 0, 0, 0.7);
            padding: 2px 8px;
            border-radius: 10px;
        }

        /* Particle Effects */
        .particles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #ffd700;
            border-radius: 50%;
            opacity: 0;
        }

        /* Win Animation */
        .win-explosion {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 48px;
            font-weight: bold;
            color: #ffd700;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.8);
            opacity: 0;
            z-index: 1000;
        }

        @keyframes winExplosion {
            0% { 
                opacity: 0; 
                transform: translate(-50%, -50%) scale(0.5); 
            }
            50% { 
                opacity: 1; 
                transform: translate(-50%, -50%) scale(1.2); 
            }
            100% { 
                opacity: 0; 
                transform: translate(-50%, -50%) scale(1); 
            }
        }

        /* Spinning Animation */
        .spinning {
            animation: reelSpin 0.1s linear infinite;
        }

        @keyframes reelSpin {
            from { transform: translateY(0); }
            to { transform: translateY(-40px); }
        }

        /* Responsive Design for Razr */
        @media screen and (max-width: 400px) {
            .game-title { font-size: 20px; }
            .reel { width: 60px; height: 100px; }
            .symbol { font-size: 24px; height: 33px; }
            .control-btn { padding: 12px 16px; font-size: 14px; }
            .spin-btn { padding: 16px 24px; font-size: 18px; }
        }

        /* Jackpot Display */
        .jackpot-display {
            position: absolute;
            top: 5px;
            right: 10px;
            background: linear-gradient(45deg, #ff6b6b, #ffd700);
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
            color: #000;
            animation: jackpotPulse 1.5s ease-in-out infinite;
        }

        @keyframes jackpotPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        /* Loading Screen */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1a1a2e, #16213e, #0f3460);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            transition: opacity 0.5s ease-out;
        }

        .loading-screen.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 4px solid #333;
            border-top: 4px solid #ffd700;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-text {
            color: #ffd700;
            font-size: 18px;
            font-weight: bold;
            text-align: center;
        }

        /* Touch Effects */
        .touch-effect {
            position: absolute;
            width: 100px;
            height: 100px;
            border: 2px solid #ffd700;
            border-radius: 50%;
            opacity: 0;
            transform: scale(0);
            pointer-events: none;
        }

        @keyframes touchRipple {
            0% {
                opacity: 1;
                transform: scale(0);
            }
            100% {
                opacity: 0;
                transform: scale(1);
            }
        }

        .touch-effect.animate {
            animation: touchRipple 0.6s ease-out;
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-spinner"></div>
        <div class="loading-text">
            ðŸŽ° AI FORTUNE REELS ðŸŽ°<br>
            Loading Professional Casino Experience...
        </div>
    </div>

    <div class="dual-screen-container">
        <!-- Top Screen - Display Area -->
        <div class="top-screen" id="topScreen">
            <div class="jackpot-display" id="jackpotDisplay">JACKPOT: 10,000</div>
            <div class="game-title">ðŸŽ° AI FORTUNE REELS ðŸŽ°</div>
            
            <div class="slot-frame">
                <div class="game-info">
                    <div class="info-item">
                        <div>CREDITS</div>
                        <div class="info-value" id="credits">1000</div>
                    </div>
                    <div class="info-item">
                        <div>BET</div>
                        <div class="info-value" id="bet">10</div>
                    </div>
                    <div class="info-item">
                        <div>WIN</div>
                        <div class="info-value" id="winAmount">0</div>
                    </div>
                </div>

                <div class="reels-container">
                    <div class="reel" id="reel1">
                        <div class="reel-strip" id="strip1"></div>
                    </div>
                    <div class="reel" id="reel2">
                        <div class="reel-strip" id="strip2"></div>
                    </div>
                    <div class="reel" id="reel3">
                        <div class="reel-strip" id="strip3"></div>
                    </div>
                    <div class="paylines" id="paylines"></div>
                </div>

                <div class="win-display" id="winDisplay"></div>
            </div>

            <div class="particles" id="particles"></div>
            <div class="win-explosion" id="winExplosion"></div>
        </div>

        <!-- Bottom Screen - Controls -->
        <div class="bottom-screen">
            <div class="controls-row">
                <button class="control-btn" id="betMinusBtn">BET -</button>
                <button class="control-btn" id="maxBetBtn">MAX BET</button>
                <button class="control-btn" id="betPlusBtn">BET +</button>
            </div>

            <div class="controls-row">
                <button class="control-btn spin-btn" id="spinBtn">ðŸŽ° SPIN ðŸŽ°</button>
            </div>

            <div class="controls-row">
                <button class="control-btn" id="autospinBtn">AUTO SPIN</button>
                <button class="control-btn" id="paytableBtn">PAYTABLE</button>
                <button class="control-btn" id="settingsBtn">SETTINGS</button>
            </div>

            <div class="controls-row">
                <button class="control-btn" id="aiModeBtn">ðŸ¤– AI MODE</button>
                <button class="control-btn" id="soundBtn">ðŸ”Š SOUND</button>
            </div>
        </div>
    </div>

    <div class="ai-credit">Powered by Claude AI (Anthropic) - Professional Casino Gaming Experience</div>

    <script>
        class AIFortuneReels {
            constructor() {
                this.credits = 1000;
                this.bet = 10;
                this.minBet = 1;
                this.maxBet = 100;
                this.isSpinning = false;
                this.autoSpin = false;
                this.soundEnabled = true;
                this.aiMode = false;
                this.jackpot = 10000;
                this.totalSpins = 0;
                this.totalWins = 0;
                
                // Slot symbols with weights (higher weight = more common)
                this.symbols = [
                    { symbol: 'ðŸ’', weight: 25, payout: { 2: 2, 3: 10 } },
                    { symbol: 'ðŸ‹', weight: 20, payout: { 2: 3, 3: 15 } },
                    { symbol: 'ðŸŠ', weight: 20, payout: { 2: 3, 3: 15 } },
                    { symbol: 'ðŸ‡', weight: 15, payout: { 2: 5, 3: 25 } },
                    { symbol: 'ðŸ””', weight: 10, payout: { 2: 10, 3: 50 } },
                    { symbol: 'â­', weight: 8, payout: { 2: 15, 3: 75 } },
                    { symbol: 'ðŸ’Ž', weight: 5, payout: { 2: 25, 3: 150 } },
                    { symbol: 'ðŸŽ°', weight: 3, payout: { 2: 50, 3: 500 } },
                    { symbol: 'ðŸ¤–', weight: 2, payout: { 2: 100, 3: 1000 } } // AI symbol
                ];
                
                this.reelResults = [[], [], []];
                this.paylines = [
                    [1, 1, 1], // Middle row
                    [0, 0, 0], // Top row
                    [2, 2, 2], // Bottom row
                    [0, 1, 2], // Diagonal down
                    [2, 1, 0]  // Diagonal up
                ];
                
                this.initializeGame();
                this.setupEventListeners();
                this.createReelStrips();
                this.updateDisplay();
            }

            initializeGame() {
                // Initialize audio context for sound effects
                this.audioContext = null;
                try {
                    this.audioContext = new (window.AudioContext || window.webkitAudioContext)();
                } catch (e) {
                    console.log('Audio context not supported');
                }
            }

            setupEventListeners() {
                // Button event listeners
                document.getElementById('spinBtn').addEventListener('click', () => this.spin());
                document.getElementById('betMinusBtn').addEventListener('click', () => this.adjustBet(-1));
                document.getElementById('betPlusBtn').addEventListener('click', () => this.adjustBet(1));
                document.getElementById('maxBetBtn').addEventListener('click', () => this.setMaxBet());
                document.getElementById('autospinBtn').addEventListener('click', () => this.toggleAutoSpin());
                document.getElementById('aiModeBtn').addEventListener('click', () => this.toggleAIMode());
                document.getElementById('soundBtn').addEventListener('click', () => this.toggleSound());
                document.getElementById('paytableBtn').addEventListener('click', () => this.showPaytable());
                document.getElementById('settingsBtn').addEventListener('click', () => this.showSettings());

                // Top screen touch effects
                document.getElementById('topScreen').addEventListener('click', (e) => this.createTouchEffect(e));

                // Add haptic feedback to all buttons
                document.querySelectorAll('.control-btn').forEach(btn => {
                    btn.addEventListener('click', () => this.vibrate([10]));
                });
            }

            createReelStrips() {
                for (let reelIndex = 0; reelIndex < 3; reelIndex++) {
                    const strip = document.getElementById(`strip${reelIndex + 1}`);
                    strip.innerHTML = '';
                    
                    // Create extended reel strip for smooth spinning
                    for (let i = 0; i < 20; i++) {
                        const symbolData = this.getRandomSymbol();
                        const symbolDiv = document.createElement('div');
                        symbolDiv.className = 'symbol';
                        symbolDiv.textContent = symbolData.symbol;
                        strip.appendChild(symbolDiv);
                    }
                }
            }

            getRandomSymbol() {
                const totalWeight = this.symbols.reduce((sum, s) => sum + s.weight, 0);
                let random = Math.random() * totalWeight;
                
                for (const symbolData of this.symbols) {
                    random -= symbolData.weight;
                    if (random <= 0) {
                        return symbolData;
                    }
                }
                return this.symbols[0];
            }

            async spin() {
                if (this.isSpinning || this.credits < this.bet) {
                    this.vibrate([50, 50, 50]); // Error vibration
                    return;
                }

                this.isSpinning = true;
                this.credits -= this.bet;
                this.totalSpins++;
                this.updateDisplay();

                // Spin sound and vibration
                this.playSound('spin');
                this.vibrate([100]);

                // AI Mode: Adjust odds slightly in player's favor
                const aiBonus = this.aiMode ? 0.1 : 0;

                // Animate reels
                await this.animateReels();

                // Generate results
                this.generateResults(aiBonus);

                // Check for wins
                const winData = this.checkWins();
                
                if (winData.totalWin > 0) {
                    this.credits += winData.totalWin;
                    this.totalWins++;
                    
                    // Check for jackpot
                    if (winData.totalWin >= this.jackpot) {
                        await this.showJackpot(winData.totalWin);
                    } else {
                        await this.showWin(winData);
                    }
                    
                    this.playSound('win');
                    this.vibrate([200, 100, 200, 100, 200]);
                } else {
                    this.playSound('lose');
                    this.vibrate([300]);
                }

                // Increment jackpot slightly with each spin
                this.jackpot += Math.floor(this.bet * 0.1);

                this.updateDisplay();
                this.isSpinning = false;

                // Auto spin
                if (this.autoSpin && this.credits >= this.bet) {
                    setTimeout(() => this.spin(), 2000);
                }
            }

            async animateReels() {
                const reels = [
                    document.getElementById('strip1'),
                    document.getElementById('strip2'),
                    document.getElementById('strip3')
                ];

                // Start spinning animation
                reels.forEach(reel => reel.classList.add('spinning'));

                // Stop reels one by one
                for (let i = 0; i < 3; i++) {
                    await new Promise(resolve => {
                        setTimeout(() => {
                            reels[i].classList.remove('spinning');
                            this.playSound('reelStop');
                            this.vibrate([50]);
                            resolve();
                        }, 1000 + (i * 500));
                    });
                }
            }

            generateResults(aiBonus = 0) {
                for (let reel = 0; reel < 3; reel++) {
                    this.reelResults[reel] = [];
                    for (let row = 0; row < 3; row++) {
                        let symbolData;
                        
                        // AI mode: slightly increase chance of higher value symbols
                        if (this.aiMode && Math.random() < aiBonus) {
                            const highValueSymbols = this.symbols.slice(-4); // Last 4 symbols are highest value
                            symbolData = highValueSymbols[Math.floor(Math.random() * highValueSymbols.length)];
                        } else {
                            symbolData = this.getRandomSymbol();
                        }
                        
                        this.reelResults[reel][row] = symbolData.symbol;
                    }
                }

                // Update visual reels
                this.updateReelDisplay();
            }

            updateReelDisplay() {
                for (let reel = 0; reel < 3; reel++) {
                    const strip = document.getElementById(`strip${reel + 1}`);
                    const symbols = strip.querySelectorAll('.symbol');
                    
                    // Show the middle 3 symbols
                    for (let i = 0; i < 3; i++) {
                        if (symbols[i + 8]) {
                            symbols[i + 8].textContent = this.reelResults[reel][i];
                        }
                    }
                }
            }

            checkWins() {
                let totalWin = 0;
                const winningLines = [];

                for (let lineIndex = 0; lineIndex < this.paylines.length; lineIndex++) {
                    const line = this.paylines[lineIndex];
                    const symbols = [
                        this.reelResults[0][line[0]],
                        this.reelResults[1][line[1]],
                        this.reelResults[2][line[2]]
                    ];

                    const win = this.calculateLineWin(symbols);
                    if (win > 0) {
                        totalWin += win * this.bet;
                        winningLines.push({ line: lineIndex, symbols, win: win * this.bet });
                    }
                }

                return { totalWin, winningLines };
            }

            calculateLineWin(symbols) {
                const firstSymbol = symbols[0];
                
                // Check for 3 of a kind
                if (symbols.every(s => s === firstSymbol)) {
                    const symbolData = this.symbols.find(s => s.symbol === firstSymbol);
                    return symbolData ? symbolData.payout[3] || 0 : 0;
                }
                
                // Check for 2 of a kind (first two symbols)
                if (symbols[0] === symbols[1]) {
                    const symbolData = this.symbols.find(s => s.symbol === firstSymbol);
                    return symbolData ? symbolData.payout[2] || 0 : 0;
                }

                return 0;
            }

            async showWin(winData) {
                const winDisplay = document.getElementById('winDisplay');
                const winExplosion = document.getElementById('winExplosion');
                
                winDisplay.textContent = `WIN: ${winData.totalWin} CREDITS!`;
                winExplosion.textContent = `ðŸŽ‰ WIN! ðŸŽ‰`;
                winExplosion.style.animation = 'winExplosion 2s ease-out';

                // Show winning paylines
                this.highlightWinningLines(winData.winningLines);

                // Particle effects
                this.createWinParticles();

                // Reset after animation
                setTimeout(() => {
                    winDisplay.textContent = '';
                    winExplosion.style.animation = '';
                }, 3000);
            }

            highlightWinningLines(winningLines) {
                const paylinesContainer = document.getElementById('paylines');
                paylinesContainer.innerHTML = '';

                winningLines.forEach((winLine, index) => {
                    setTimeout(() => {
                        const paylineDiv = document.createElement('div');
                        paylineDiv.className = 'payline';
                        paylineDiv.style.top = `${(winLine.line % 3) * 40 + 20}px`;
                        paylineDiv.style.left = '0';
                        paylineDiv.style.right = '0';
                        paylinesContainer.appendChild(paylineDiv);

                        setTimeout(() => paylineDiv.remove(), 1000);
                    }, index * 200);
                });
            }

            createWinParticles() {
                const particlesContainer = document.getElementById('particles');
                
                for (let i = 0; i < 50; i++) {
                    setTimeout(() => {
                        const particle = document.createElement('div');
                        particle.className = 'particle';
                        particle.style.left = Math.random() * 100 + '%';
                        particle.style.top = Math.random() * 100 + '%';
                        particle.style.opacity = '1';
                        
                        const colors = ['#ffd700', '#ffed4e', '#ff6b6b', '#4ecdc4'];
                        particle.style.background = colors[Math.floor(Math.random() * colors.length)];
                        
                        particlesContainer.appendChild(particle);

                        // Animate particle
                        particle.animate([
                            { transform: 'translateY(0) scale(1)', opacity: 1 },
                            { transform: 'translateY(-100px) scale(0)', opacity: 0 }
                        ], {
                            duration: 2000,
                            easing: 'ease-out'
                        }).onfinish = () => particle.remove();
                    }, i * 50);
                }
            }

            createTouchEffect(event) {
                const effect = document.createElement('div');
                effect.className = 'touch-effect';
                effect.style.left = (event.clientX - 50) + 'px';
                effect.style.top = (event.clientY - 50) + 'px';
                
                document.getElementById('topScreen').appendChild(effect);
                
                setTimeout(() => {
                    effect.classList.add('animate');
                    setTimeout(() => effect.remove(), 600);
                }, 10);

                this.vibrate([20]);
            }

            adjustBet(direction) {
                const newBet = this.bet + (direction * 5);
                if (newBet >= this.minBet && newBet <= this.maxBet && newBet <= this.credits) {
                    this.bet = newBet;
                    this.updateDisplay();
                    this.playSound('button');
                }
            }

            setMaxBet() {
                this.bet = Math.min(this.maxBet, this.credits);
                this.updateDisplay();
                this.playSound('button');
            }

            toggleAutoSpin() {
                this.autoSpin = !this.autoSpin;
                const btn = document.getElementById('autospinBtn');
                btn.textContent = this.autoSpin ? 'STOP AUTO' : 'AUTO SPIN';
                btn.style.background = this.autoSpin ? 
                    'linear-gradient(145deg, #ff6b6b, #cc5555)' : 
                    'linear-gradient(145deg, #4a4a4a, #2a2a2a)';
                this.playSound('button');
            }

            toggleAIMode() {
                this.aiMode = !this.aiMode;
                const btn = document.getElementById('aiModeBtn');
                btn.textContent = this.aiMode ? 'ðŸ¤– AI ON' : 'ðŸ¤– AI MODE';
                btn.style.background = this.aiMode ? 
                    'linear-gradient(145deg, #4ecdc4, #45b7aa)' : 
                    'linear-gradient(145deg, #4a4a4a, #2a2a2a)';
                this.playSound('button');
                
                if (this.aiMode) {
                    this.showMessage('AI Mode Activated: Enhanced winning chances!');
                }
            }

            toggleSound() {
                this.soundEnabled = !this.soundEnabled;
                const btn = document.getElementById('soundBtn');
                btn.textContent = this.soundEnabled ? 'ðŸ”Š SOUND' : 'ðŸ”‡ MUTED';
                this.playSound('button');
            }

            showPaytable() {
                let paytableText = 'PAYTABLE (x Bet):\n\n';
                this.symbols.forEach(symbol => {
                    paytableText += `${symbol.symbol}: `;
                    if (symbol.payout[2]) paytableText += `2x=${symbol.payout[2]} `;
                    if (symbol.payout[3]) paytableText += `3x=${symbol.payout[3]}`;
                    paytableText += '\n';
                });
                alert(paytableText);
            }

            showSettings() {
                const winRate = this.totalSpins > 0 ? ((this.totalWins / this.totalSpins) * 100).toFixed(1) : 0;
                alert(`Settings & Stats:\n\nâ€¢ AI Mode: Enhanced winning probability\nâ€¢ Auto Spin: Continuous play\nâ€¢ Sound: Toggle audio effects\nâ€¢ Vibration: Haptic feedback\n\nGame Stats:\nâ€¢ Total Spins: ${this.totalSpins}\nâ€¢ Total Wins: ${this.totalWins}\nâ€¢ Win Rate: ${winRate}%\nâ€¢ Current Jackpot: ${this.jackpot.toLocaleString()}\n\nGame RTP: ~96% (98% with AI Mode)`);
            }

            showMessage(message) {
                const winDisplay = document.getElementById('winDisplay');
                winDisplay.textContent = message;
                setTimeout(() => winDisplay.textContent = '', 3000);
            }

            async showJackpot(amount) {
                const winDisplay = document.getElementById('winDisplay');
                const winExplosion = document.getElementById('winExplosion');
                
                winDisplay.textContent = `ðŸŽ‰ JACKPOT! ${amount} CREDITS! ðŸŽ‰`;
                winExplosion.textContent = `ðŸ’° JACKPOT! ðŸ’°`;
                winExplosion.style.animation = 'winExplosion 3s ease-out';
                winExplosion.style.fontSize = '36px';

                // Extra particle effects for jackpot
                this.createWinParticles();
                setTimeout(() => this.createWinParticles(), 500);
                setTimeout(() => this.createWinParticles(), 1000);

                // Reset jackpot
                this.jackpot = 10000;

                // Reset after animation
                setTimeout(() => {
                    winDisplay.textContent = '';
                    winExplosion.style.animation = '';
                    winExplosion.style.fontSize = '48px';
                }, 5000);
            }

            updateDisplay() {
                document.getElementById('credits').textContent = this.credits;
                document.getElementById('bet').textContent = this.bet;
                document.getElementById('jackpotDisplay').textContent = `JACKPOT: ${this.jackpot.toLocaleString()}`;
                
                // Disable spin button if insufficient credits
                const spinBtn = document.getElementById('spinBtn');
                if (this.credits < this.bet) {
                    spinBtn.style.opacity = '0.5';
                    spinBtn.style.cursor = 'not-allowed';
                } else {
                    spinBtn.style.opacity = '1';
                    spinBtn.style.cursor = 'pointer';
                }
            }

            playSound(type) {
                if (!this.soundEnabled || !this.audioContext) return;

                const frequencies = {
                    spin: [200, 300, 400],
                    reelStop: [150],
                    win: [400, 500, 600, 700],
                    lose: [100, 80],
                    button: [300]
                };

                const freq = frequencies[type] || [200];
                
                freq.forEach((f, index) => {
                    setTimeout(() => {
                        const oscillator = this.audioContext.createOscillator();
                        const gainNode = this.audioContext.createGain();
                        
                        oscillator.connect(gainNode);
                        gainNode.connect(this.audioContext.destination);
                        
                        oscillator.frequency.setValueAtTime(f, this.audioContext.currentTime);
                        oscillator.type = type === 'win' ? 'sine' : 'square';
                        
                        gainNode.gain.setValueAtTime(0.1, this.audioContext.currentTime);
                        gainNode.gain.exponentialRampToValueAtTime(0.01, this.audioContext.currentTime + 0.3);
                        
                        oscillator.start(this.audioContext.currentTime);
                        oscillator.stop(this.audioContext.currentTime + 0.3);
                    }, index * 100);
                });
            }

            vibrate(pattern) {
                if ('vibrate' in navigator) {
                    navigator.vibrate(pattern);
                }
            }
        }

        // Initialize game when page loads
        document.addEventListener('DOMContentLoaded', () => {
            // Show loading screen
            const loadingScreen = document.getElementById('loadingScreen');
            
            // Simulate loading time for professional feel
            setTimeout(() => {
                loadingScreen.classList.add('hidden');
                
                // Enable audio context on first user interaction
                document.addEventListener('click', function enableAudio() {
                    if (window.game && window.game.audioContext && window.game.audioContext.state === 'suspended') {
                        window.game.audioContext.resume();
                    }
                    document.removeEventListener('click', enableAudio);
                });

                window.game = new AIFortuneReels();
            }, 2000);
        });
    </script>
</body>
</html>